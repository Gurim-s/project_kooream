<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.kooream.mapper.RntRsvtMapper">
	<select id="getPrice" parameterType="com.kooream.domain.RntRsvtVO" resultType="com.kooream.domain.ProductVO">
		SELECT * FROM PRODUCT WHERE P_NO = #{p_no}
	</select>
	
	<insert id="rgstRsvt">
		INSERT INTO RSVT_TBL 
				(R_NO, 
				M_NO, 
				P_NO, 
				STRT_R_DATE, 
				RTRN_R_DATE)
		VALUES(rsvt_seq.nextval, 
				9999, 
				#{p_no}, 
				TO_DATE(#{strt_r_date}, 'YYYY/MM/DD'), 
				TO_DATE(#{rtrn_r_date}, 'YYYY/MM/DD'))
	</insert>
	
	<select id="getRsvt" resultType="com.kooream.domain.RntRsvtVO">
		SELECT TO_CHAR(STRT_R_DATE,'YYYY-MM-DD') AS strt_r_date, TO_CHAR(RTRN_R_DATE, 'YYYY-MM-DD') AS rtrn_r_date
		FROM RSVT_TBL
		WHERE P_NO=#{p_no} and m_no=9999
	</select>
</mapper>